.. index:: upgrading; from 3.0.x

Upgrading from 3.0.x to 3.1.x
=============================

#. Upgrade packages.

   .. code-block:: bash

        apt-get update
        apt-get install karaage3

#. Merge in changes from `/etc/karaage/global_settings.py` into
   `/etc/karaage3/settings.py`. Or just copy the file should be sufficient.

#. If required, add the following to `/etc/karaage3/settings.py`:

   .. code-block:: python

        PLUGINS = [
            'kgusage.plugins.Jobs',
        ]

   .. code-block:: bash

       service karaage3-celery restart

#. Otherwise purge karaage3-celery if kgusage not required.

#. Run the database migrations, restart apache, and install the celery
   deaemon.

   .. code-block:: bash

        kg-manage migrate --all
        service apache2 reload

#.  Clean cruft.

    .. code-block:: bash

        dpkg --purge python-karaage-celery
        rm -rf /var/cache/karaage
        rm -rf /var/log/karaage

#.  Other dummy packages can be removed too. This is optional.

    .. code-block:: bash

        dpkg --purge karaage3-admin
        dpkg --purge karaage3-registration
        dpkg --purge python-karaage-doc
